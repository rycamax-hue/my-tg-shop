<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æå®¢æ•°ç å•†åŸ</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-theme-bg-color: #f0f2f5;
            --tg-theme-button-color: #248bcf;
            --tg-theme-button-text-color: #ffffff;
            --accent-color: #ff9500;
        }
        body {
            font-family: -apple-system, system-ui, sans-serif;
            background-color: var(--tg-theme-bg-color);
            margin: 0; padding: 0; padding-bottom: 80px;
            user-select: none;
        }
        /* é¡¶éƒ¨æ¨ªå¹… */
        .banner {
            background: linear-gradient(135deg, #248bcf, #00c6ff);
            color: white; padding: 25px 20px; text-align: left;
        }
        /* åˆ†ç±»æ  */
        .categories {
            display: flex; gap: 10px; padding: 15px; overflow-x: auto;
            white-space: nowrap; sticky: top; background: var(--tg-theme-bg-color);
        }
        .cat-item {
            background: white; padding: 8px 15px; border-radius: 15px;
            font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        /* å•†å“ç½‘æ ¼ */
        .container { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 12px; }
        .card {
            background: white; border-radius: 12px; overflow: hidden;
            display: flex; flex-direction: column; box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .card img { width: 100%; height: 120px; object-fit: cover; background: #eee; }
        .card-info { padding: 10px; flex-grow: 1; }
        .card-title { font-size: 14px; font-weight: 600; margin-bottom: 5px; }
        .card-price { color: var(--accent-color); font-size: 16px; font-weight: bold; }
        /* è´­ä¹°æŒ‰é’® */
        .add-btn {
            background: var(--tg-theme-button-color); color: white;
            border: none; border-radius: 8px; padding: 8px; width: 100%;
            margin-top: 8px; font-weight: bold; cursor: pointer;
        }
        /* åº•éƒ¨ç»“ç®—æ  */
        .footer {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: white; padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1); border-radius: 20px 20px 0 0;
        }
        .total-price { font-size: 20px; font-weight: bold; color: #333; }
        .checkout-btn {
            background: #31b545; color: white; border: none;
            padding: 10px 25px; border-radius: 12px; font-size: 16px; font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="banner">
        <h2 style="margin:0">Hi, æå®¢! ğŸ‘‹</h2>
        <p style="margin:5px 0 0; opacity:0.8">å‘ç°ä»Šæ—¥æœ€å¼ºæ•°ç å•å“</p>
    </div>

    <div class="categories">
        <div class="cat-item">ğŸ”¥ çƒ­é—¨</div>
        <div class="cat-item">ğŸ’» ç”µè„‘</div>
        <div class="cat-item">ğŸ§ è€³æœº</div>
        <div class="cat-item">ğŸ“± æ‰‹æœº</div>
    </div>

    <div class="container" id="product-list">
        </div>

    <div class="footer">
        <div>
            <span style="font-size: 12px; color: #888;">åˆè®¡</span>
            <div class="total-price">Â¥<span id="total-amount">0</span></div>
        </div>
        <button class="checkout-btn" onclick="checkout()">ç«‹å³ç»“ç®—</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        const products = [
            { id: 1, name: "iPhone 15 Pro", price: 7999, img: "https://images.unsplash.com/photo-1696446701796-da61225697cc?w=300" },
            { id: 2, name: "iPad Air", price: 4799, img: "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=300" },
            { id: 3, name: "MacBook M3", price: 9299, img: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=300" },
            { id: 4, name: "AirPods Pro", price: 1899, img: "https://images.unsplash.com/photo-1588423770574-91993ca06f1f?w=300" }
        ];

        let total = 0;

        function renderProducts() {
            const list = document.getElementById('product-list');
            products.forEach(p => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="${p.img}">
                    <div class="card-info">
                        <div class="card-title">${p.name}</div>
                        <div class="card-price">Â¥${p.price}</div>
                        <button class="add-btn" onclick="addToCart(${p.price})">åŠ å…¥è´­ç‰©è½¦</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        function addToCart(price) {
            tg.HapticFeedback.impactOccurred('light'); // è½»å¾®éœ‡åŠ¨
            total += price;
            document.getElementById('total-amount').innerText = total;
            
            // æ˜¾ç¤º Telegram åŸç”Ÿä¸»æŒ‰é’®
            tg.MainButton.text = `å»æ”¯ä»˜ Â¥${total}`;
            tg.MainButton.show();
        }

        tg.onEvent('mainButtonClicked', function() {
            checkout();
        });

        function checkout() {
            if (total === 0) {
                tg.showAlert("è´­ç‰©è½¦è¿˜æ˜¯ç©ºçš„å“¦~");
                return;
            }
            tg.showConfirm(`ç¡®è®¤æ”¯ä»˜ Â¥${total} å—ï¼Ÿ`, (ok) => {
                if (ok) {
                    tg.showAlert("è®¢å•å·²æäº¤ï¼æˆ‘ä»¬ä¼šå°½å¿«ä¸ºæ‚¨å‘è´§ã€‚");
                    total = 0;
                    document.getElementById('total-amount').innerText = total;
                    tg.MainButton.hide();
                }
            });
        }

        renderProducts();
    </script>
</body>
</html>
